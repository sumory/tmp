webpackJsonp([15],{759:function(n,s){n.exports={content:["article",["div",{class:"placeholder"}],["p","lor\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5185\u7f6e\u7684",["a",{title:null,href:"https://github.com/sumory/lor/blob/master/lor/lib/middleware/cookie.lua"},"cookie\u63d2\u4ef6"],"\uff0c\u53ea\u8981\u50cfrequire\u5176\u5b83\u6a21\u5757\u4e00\u6837\u52a0\u8f7d\u5c31\u53ef\u4f7f\u7528\u3002"],["p",["strong","\u6ce8\u610f"],":"],["ul",["li",["p","\u5728\u4f7f\u7528\u8fd9\u4e2a\u63d2\u4ef6\u65f6\uff0c\u7528\u6237\u5e94\u8be5\u5148\u4e86\u89e3",["a",{title:null,href:"https://github.com/cloudflare/lua-resty-cookie"},"lua-resty-cookie"],"\u7684API\u4f7f\u7528\u65b9\u5f0f"]],["li",["p","\u751f\u4ea7\u9879\u76ee\u4e2d\u5982\u6709\u5176\u5b83cookie\u9700\u6c42\uff0c\u7528\u6237\u5e94",["strong","\u81ea\u884c\u521b\u5efa"],"\u4e00\u4e2a\u63d2\u4ef6\u6216\u662f\u5e93\u6765\u7ba1\u7406cookie\uff0c \u5efa\u8bae\u53c2\u8003",["a",{title:null,href:"https://github.com/cloudflare/lua-resty-cookie"},"lua-resty-cookie"],"\u7684\u5b9e\u73b0"]]],["p","lor\u63d0\u4f9b\u7684\u9ed8\u8ba4cookie\u63d2\u4ef6\u4f7f\u7528\u65b9\u5f0f\u5982\u4e0b:"],["pre",{lang:"lua",highlighted:'<span class="token keyword">local</span> lor <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"lor.index"</span><span class="token punctuation">)</span>\n<span class="token keyword">local</span> app <span class="token operator">=</span> <span class="token function">lor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n\n<span class="token comment" spellcheck="true">-- \u52a0\u8f7dcookie\u63d2\u4ef6</span>\n<span class="token keyword">local</span> middleware_cookie <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"lor.lib.middleware.cookie"</span><span class="token punctuation">)</span>\n\n<span class="token comment" spellcheck="true">-- \u52a0\u8f7dcookie\u63d2\u4ef6\u540e\uff0c`cookie`\u88ab\u6ce8\u5165\u5230\u4e86`req`\u8fd9\u4e2a\u5bf9\u8c61\u91cc</span>\napp<span class="token punctuation">:</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">middleware_cookie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n\n<span class="token comment" spellcheck="true">-- \u6a21\u62dfcookie\u7684\u5199\u5165</span>\napp<span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/set_cookie"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span>\n    <span class="token comment" spellcheck="true">-- \u4f7f\u7528res.cookie.set\u8fd9\u4e2aAPI\u6765\u5199cookie</span>\n    req<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"test_cookie"</span><span class="token punctuation">,</span> <span class="token string">"12345"</span><span class="token punctuation">)</span>\n    res<span class="token punctuation">:</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"cookie was set."</span><span class="token punctuation">)</span>\n<span class="token keyword">end</span><span class="token punctuation">)</span>\n\n<span class="token comment" spellcheck="true">-- \u6a21\u62dfcookie\u7684\u8bfb\u53d6, \u8fd4\u56de`12345`</span>\napp<span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/set_cookie"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span>\n    <span class="token keyword">local</span> test_cookie <span class="token operator">=</span> req<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"test_cookie"</span><span class="token punctuation">)</span>\n    res<span class="token punctuation">:</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"cookie is:"</span><span class="token operator">..</span> test_cookie<span class="token punctuation">)</span>\n<span class="token keyword">end</span><span class="token punctuation">)</span>\n\napp<span class="token punctuation">:</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>'},["code",'local lor = require("lor.index")\nlocal app = lor()\n\n-- \u52a0\u8f7dcookie\u63d2\u4ef6\nlocal middleware_cookie = require("lor.lib.middleware.cookie")\n\n-- \u52a0\u8f7dcookie\u63d2\u4ef6\u540e\uff0c`cookie`\u88ab\u6ce8\u5165\u5230\u4e86`req`\u8fd9\u4e2a\u5bf9\u8c61\u91cc\napp:use(middleware_cookie())\n\n-- \u6a21\u62dfcookie\u7684\u5199\u5165\napp:get("/set_cookie", function(req, res, next)\n    -- \u4f7f\u7528res.cookie.set\u8fd9\u4e2aAPI\u6765\u5199cookie\n    req.cookie.set("test_cookie", "12345")\n    res:send("cookie was set.")\nend)\n\n-- \u6a21\u62dfcookie\u7684\u8bfb\u53d6, \u8fd4\u56de`12345`\napp:get("/set_cookie", function(req, res, next)\n    local test_cookie = req.cookie.get("test_cookie")\n    res:send("cookie is:".. test_cookie)\nend)\n\napp:run()']],["p","\u5173\u4e8e\u6b64\u63d2\u4ef6\u7684\u4f7f\u7528\u8fd8\u53ef\u53c2\u770bGithub\u4e0a\u7684\u4e24\u4e2aissues\uff1a ",["a",{title:null,href:"https://github.com/sumory/lor/issues/37"},"#issues37"]," & ",["a",{title:null,href:"https://github.com/sumory/lor/issues/35"},"#issues35"]]],meta:{title:"\u4f7f\u7528cookie",type:"\u9ad8\u7ea7",order:203,filename:"docs/cookie_usage.zh-CN.md"},toc:["ul"]}}});